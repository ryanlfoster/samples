# openweb-build
Build tool for Open Web projects.
Runs the RequireJS build tool which compresses and combines your JavaScript.
Precompiles your Handlebars templates (if you load them with the tmpl.js plugin).
Compiles your LESS into CSS and updates references, removes less.js

## to run the build
from the root of your project, type:
    node node_modules/openweb-build/bin/build.js

## options

### different build tool name
This tool will be expecting your RequireJS build profile to be named app.build.js, located at the project root.
If you want to use a different name/location for this file, just pass it in as an argument like so:
    node node_modules/openweb-build/bin/build.js --profile=path/to/myproject.build.js

### copy files only
Sometimes you may want to just copy your frontend files to the output directory, without doing any optimizations.
This is easily achieved by using the --copyonly option like so:
    node node_modules/openweb-build/bin/build.js --copyonly=true

### disable LESS compilation
If your project doesn't use LESS, or you want to skip optimization for whatever reason, you can tell openweb-build to not run less like so:
    node node_modules/openweb-build/bin/build.js --less=false

### clear previous build directory
RequireJS creates a copy of your entire frontend folder for the build. It should only copy over files that are new, which is good if you have lots of videos/images in your frontend folder. If something ever goes wrong with your build folder, you may want to delete it and run your build again. The --clear=true option does that. 

### add symlinks
RequireJS creates a copy of your entire frontend folder for the build. This can get really slow if you're including a lot of binary files (videos, mockups, etc) in the frontend folder. A better practice is to put those files outside of the frontend folder, then create a symlink to it. The only problem then is that RequireJS won't copy over your symlinks to the build folder. So openweb-build will create the symlinks for you, you just have have specify what you want them to be using the openweb.symlinks config object. Example:
openweb: {
  symlinks: {
    'videos' : '../videos'
  }
}
The key ('videos') is the location of the actual folder you want to link to, relative to the root of your project where you run the build. 
The value ('../videos') is the path to the original folder FROM the build dir.
In this example, frontend-build/videos will now symlink to videos. 

Also be sure to have RequireJS ignore your symlinks, by using the fileExclusionRegExp option:

fileExclusionRegExp: /^(\.|(videos)$)/

That regexp ignores anything that starts with a . OR the videos folder. To ignore multiple folders you would do it like this:

fileExclusionRegExp: /^(\.|(videos|images|media)$)/,

## NOTE
If your project has nested require() calls, and you want those files to be part of the optimized build, then your build profile needs the findNestedDependencies: true setting. 


